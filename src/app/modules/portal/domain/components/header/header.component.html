<mat-toolbar class="header-toolbar" color="primary">
  <div class="header-left">
    <button 
      mat-icon-button 
      class="menu-button"
      (click)="toggleDrawer()"
      aria-label="Menu"
    >
      <mat-icon>menu</mat-icon>
    </button>
    <span class="logo-text">ReloFlow</span>
  </div>

  <div class="header-center">
    @if (currentMode === 'company' && companies.length > 0) {
      <mat-form-field appearance="outline" class="company-selector">
        <mat-label>Empresa</mat-label>
        <mat-select 
          [value]="selectedCompany?.id || ''" 
          (selectionChange)="onCompanyChange($event.value)"
          [disabled]="isLoadingCompanies"
        >
          @for (company of companies; track company.id) {
            <mat-option [value]="company.id">{{ company.name }}</mat-option>
          }
        </mat-select>
        <mat-icon matPrefix>business</mat-icon>
      </mat-form-field>
    }
  </div>

  <div class="header-right">
    <div class="mode-toggle-container">
      <mat-icon class="mode-icon">{{ currentMode === 'company' ? 'business' : 'person' }}</mat-icon>
      <mat-slide-toggle 
        [checked]="currentMode === 'company'"
        (change)="toggleMode()"
        [matTooltip]="currentMode === 'company' ? 'Modo Empresa' : 'Modo Usuário'"
        aria-label="Alternar modo"
      >
        <span class="mode-label">{{ currentMode === 'company' ? 'Empresa' : 'Usuário' }}</span>
      </mat-slide-toggle>
    </div>

    <button 
      mat-icon-button 
      class="theme-toggle-button"
      (click)="toggleTheme()"
      [matTooltip]="isDarkMode ? 'Modo claro' : 'Modo escuro'"
      aria-label="Alternar tema"
    >
      <mat-icon>{{ isDarkMode ? 'light_mode' : 'dark_mode' }}</mat-icon>
    </button>
    
    <button 
      mat-icon-button 
      class="notification-button"
      (click)="openNotifications()"
      aria-label="Notificações"
    >
      <mat-icon>notifications</mat-icon>
    </button>
    
    <button 
      mat-button 
      [matMenuTriggerFor]="userMenu"
      class="user-menu-button"
    >
      <span class="user-name">{{ getUserDisplayName() }}</span>
      <mat-icon>arrow_drop_down</mat-icon>
    </button>
    
    <mat-menu #userMenu="matMenu">
      <button mat-menu-item (click)="logout()">
        <mat-icon>exit_to_app</mat-icon>
        <span>Sair</span>
      </button>
    </mat-menu>
    
    <span class="version-info">v@if (version$ | async; as version) { {{ version }} }</span>
  </div>
</mat-toolbar>

